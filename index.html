<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>祝婷婷七夕快乐</title>
    <meta name="theme-color" content="#0b0b1a" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Noto+Serif+SC:wght@400;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="app">
      <!-- Background canvases -->
      <canvas id="starsCanvas" class="canvas-layer" aria-hidden="true"></canvas>
      <canvas id="sakuraCanvas" class="canvas-layer" aria-hidden="true"></canvas>
      <canvas id="snowCanvas" class="canvas-layer" aria-hidden="true"></canvas>
      <canvas id="fireworksCanvas" class="canvas-layer" aria-hidden="true"></canvas>

      <!-- UI overlay -->
      <div id="uiOverlay" class="overlay">
        <header class="top-bar">
          <div class="days">
            <span>我们已经相伴第</span>
            <strong id="daysTogether">0</strong>
            <span>天</span>
          </div>
          <div class="controls">
            <button id="musicToggle" class="btn ghost" aria-label="音乐播放/暂停">♫ 音乐</button>
          </div>
        </header>

        <!-- Page 1: Intro fixed content -->
        <section class="section intro" id="introSection">
          <h1 class="script">给婷婷的一封情书</h1>
          <p id="typewriterText">从 2023-08-26 到今天，我把所有的喜欢都攒成一片星海，想在今晚悄悄告诉你：无论风雪还是樱花雨，每个季节都想与你一起经历。我觉得天上的星河很美，直到看见了你的眼睛。七夕快乐，祝我们永远幸福，互相支撑着走下去！</p>
          <button id="startJourney" class="btn primary">开始我们的浪漫旅程</button>
        </section>

        

        <!-- Page 3: Envelope + Signature -->
        <section class="section" id="envelopeSection" style="display:none;">
          <div class="envelope">
            <div class="envelope-header">
              <div class="script">致 婷婷</div>
            </div>
            <div class="envelope-body">
              <div class="letter-paper" id="envelopeLetter">
                <img src="assets/images/xinfeng.png" alt="给婷婷的信" style="width: 100%; height: auto; max-width: 500px; border-radius: 8px;" />
              </div>
              <div class="signature-wrap">
                <div class="label">请在此签名确认收下我的心</div>
                <canvas id="signatureCanvas" width="240" height="110"></canvas>
              </div>
            </div>
            <div class="envelope-actions">
              <button id="clearSignature" class="btn ghost">清除</button>
              <button id="acceptLetter" class="btn primary">确定</button>
            </div>
          </div>
        </section>

        <!-- Page 4: Proposal + Video -->
        <section class="section proposal hidden" id="proposalSection">
          <h2 class="script">愿意和我一直一直走下去吗？</h2>
          <div class="choices">
            <button id="yesBtn" class="btn yes">愿意</button>
            <button id="noBtn" class="btn no">不愿意</button>
          </div>
          <p id="proposalHint" class="hint">提示：不愿意可能会逃跑哦</p>
          <div style="margin-top:16px; display:none;" id="videoWrap">
            <video id="resultVideo" src="assets/videos/happy.mp4" controls style="max-width:100%;border-radius:12px;"></video>
          </div>
        </section>

        <!-- Celebration message -->
        <section class="section celebration hidden" id="celebrationSection">
          <h2 class="script">我会把所有的浪漫都给你</h2>
          <p>一起看流星、放烟花、吹樱花雨，收藏每一个与你有关的片刻。</p>
        </section>

        <!-- Page 2: Timeline / Gallery (Masonry) -->
        <section class="section gallery" id="gallerySection" style="display:none;">
          <h2 class="script">我们的来时路</h2>
          <div id="masonry" class="masonry"></div>
          <div style="text-align:center;margin-top:16px;">
            <button id="goToEnvelope" class="btn glow">继续</button>
          </div>
        </section>

        <!-- Wish section (extra) -->
        <section class="section wish hidden" id="wishSection">
          <h2 class="script">许个愿吧</h2>
          <input id="wishInput" placeholder="在此输入愿望，回车放天灯" maxlength="60" />
          <div id="lanternLayer"></div>
        </section>
      </div>

      <!-- Lightbox viewer -->
      <div id="lightbox" class="lightbox hidden" aria-hidden="true">
        <div class="lightbox-backdrop"></div>
        <div class="lightbox-content">
          <button id="lightboxClose" class="btn ghost close" aria-label="关闭">×</button>
          <img id="lightboxImage" alt="" />
          <video id="lightboxVideo" controls></video>
        </div>
      </div>
    </div>

    <!-- Background audio (replace src later) -->
    <audio id="bgm" autoplay loop preload="none">
      <source src="assets/audio/loveu.mp3" type="audio/mpeg" />
      <source src="assets/audio/loveu.flac" type="audio/flac" />
      <source src="assets/audio/loveu.ogg" type="audio/ogg" />
    </audio>

    <script src="app.js"></script>
  </body>
  </html>


